@inherits LayoutComponentBase

<PageTitle>Sample</PageTitle>

<div class="page">
    @page "/orders"
@using Radzen
@using Radzen.Blazor

<RadzenDataGrid @ref="ordersGrid" AllowFiltering="true" FilterPopupRenderMode="PopupRenderMode.OnDemand" AllowPaging="true" PageSize="5" AllowSorting="true" 
            Data="@orders" TItem="Order">
    <Columns>
        <RadzenDataGridColumn Width="50px" Title="#" Filterable="false" Sortable="false" TextAlign="TextAlign.Center">
            <Template Context="data">
                @(orders.IndexOf(data) + 1)
            </Template>
        </RadzenDataGridColumn>
        <RadzenDataGridColumn Property="Employee.LastName" Title="Employee">
            <Template Context="order">
                <RadzenStack Orientation="Orientation.Horizontal" Gap="0.5rem" AlignItems="AlignItems.Center">
                    <RadzenImage Path="@order.Employee?.Photo" Style="width: 40px; height: 40px;" class="rz-border-radius-2" AlternateText="@(order.Employee?.FirstName + " " + order.Employee?.LastName)" />
                    <RadzenStack Gap="0">
                        <RadzenText TextStyle="TextStyle.Subtitle2" class="rz-mb-0">@order.Employee?.FirstName @order.Employee?.LastName</RadzenText>
                        <RadzenText TextStyle="TextStyle.Caption" class="rz-mb-0">@order.Customer?.CompanyName</RadzenText>
                    </RadzenStack>
                </RadzenStack>
            </Template>
        </RadzenDataGridColumn>
        <RadzenDataGridColumn Property="@nameof(Order.OrderDate)" Title="Order Date" FormatString="{0:d}" />
        <RadzenDataGridColumn Property="@nameof(Order.Freight)" Title="Freight">
            <Template Context="order">
                @String.Format(new System.Globalization.CultureInfo("en-US"), "{0:C}", order.Freight)
            </Template>
        </RadzenDataGridColumn>
        <RadzenDataGridColumn Property="@nameof(Order.ShipCountry)" Title="ShipCountry" />
        <RadzenDataGridColumn Width="160px" Property="OrderID" Title="Order Details">
            <Template Context="data">
            </Template>
        </RadzenDataGridColumn>
    </Columns>
</RadzenDataGrid>


</div>

@code {
    RadzenDataGrid<Order> ordersGrid;
    List<Order> orders = new List<Order>();

    protected override void OnInitialized()
    {
        // Generate sample data
        orders = new List<Order>
        {
            new Order
            {
                OrderID = 10248,
                OrderDate = DateTime.Now.AddDays(-30),
                Freight = 32.38m,
                ShipCountry = "France",
                Employee = new Employee
                {
                    FirstName = "Nancy",
                    LastName = "Davolio",
                    Photo = "https://via.placeholder.com/40x40/007acc/ffffff?text=ND"
                },
                Customer = new Customer { CompanyName = "Vins et alcools Chevalier" }
            },
            new Order
            {
                OrderID = 10249,
                OrderDate = DateTime.Now.AddDays(-25),
                Freight = 11.61m,
                ShipCountry = "Germany",
                Employee = new Employee
                {
                    FirstName = "Andrew",
                    LastName = "Fuller",
                    Photo = "https://via.placeholder.com/40x40/28a745/ffffff?text=AF"
                },
                Customer = new Customer { CompanyName = "Toms Spezialitäten" }
            },
            new Order
            {
                OrderID = 10250,
                OrderDate = DateTime.Now.AddDays(-20),
                Freight = 65.83m,
                ShipCountry = "Brazil",
                Employee = new Employee
                {
                    FirstName = "Janet",
                    LastName = "Leverling",
                    Photo = "https://via.placeholder.com/40x40/dc3545/ffffff?text=JL"
                },
                Customer = new Customer { CompanyName = "Hanari Carnes" }
            },
            new Order
            {
                OrderID = 10251,
                OrderDate = DateTime.Now.AddDays(-15),
                Freight = 41.34m,
                ShipCountry = "France",
                Employee = new Employee
                {
                    FirstName = "Margaret",
                    LastName = "Peacock",
                    Photo = "https://via.placeholder.com/40x40/ffc107/000000?text=MP"
                },
                Customer = new Customer { CompanyName = "Victuailles en stock" }
            },
            new Order
            {
                OrderID = 10252,
                OrderDate = DateTime.Now.AddDays(-10),
                Freight = 51.30m,
                ShipCountry = "Belgium",
                Employee = new Employee
                {
                    FirstName = "Steven",
                    LastName = "Buchanan",
                    Photo = "https://via.placeholder.com/40x40/6f42c1/ffffff?text=SB"
                },
                Customer = new Customer { CompanyName = "Suprêmes délices" }
            },
            new Order
            {
                OrderID = 10253,
                OrderDate = DateTime.Now.AddDays(-8),
                Freight = 58.17m,
                ShipCountry = "Brazil",
                Employee = new Employee
                {
                    FirstName = "Michael",
                    LastName = "Suyama",
                    Photo = "https://via.placeholder.com/40x40/fd7e14/ffffff?text=MS"
                },
                Customer = new Customer { CompanyName = "Hanari Carnes" }
            },
            new Order
            {
                OrderID = 10254,
                OrderDate = DateTime.Now.AddDays(-5),
                Freight = 22.98m,
                ShipCountry = "Switzerland",
                Employee = new Employee
                {
                    FirstName = "Robert",
                    LastName = "King",
                    Photo = "https://via.placeholder.com/40x40/20c997/ffffff?text=RK"
                },
                Customer = new Customer { CompanyName = "Chop-suey Chinese" }
            },
            new Order
            {
                OrderID = 10255,
                OrderDate = DateTime.Now.AddDays(-3),
                Freight = 148.33m,
                ShipCountry = "Switzerland",
                Employee = new Employee
                {
                    FirstName = "Laura",
                    LastName = "Callahan",
                    Photo = "https://via.placeholder.com/40x40/e83e8c/ffffff?text=LC"
                },
                Customer = new Customer { CompanyName = "Richter Supermarkt" }
            },
            new Order
            {
                OrderID = 10256,
                OrderDate = DateTime.Now.AddDays(-2),
                Freight = 13.97m,
                ShipCountry = "Germany",
                Employee = new Employee
                {
                    FirstName = "Anne",
                    LastName = "Dodsworth",
                    Photo = "https://via.placeholder.com/40x40/6c757d/ffffff?text=AD"
                },
                Customer = new Customer { CompanyName = "Wellington Importadora" }
            },
            new Order
            {
                OrderID = 10257,
                OrderDate = DateTime.Now.AddDays(-1),
                Freight = 81.91m,
                ShipCountry = "Venezuela",
                Employee = new Employee
                {
                    FirstName = "Nancy",
                    LastName = "Davolio",
                    Photo = "https://via.placeholder.com/40x40/007acc/ffffff?text=ND"
                },
                Customer = new Customer { CompanyName = "HILARIÓN-Abastos" }
            }
        };
    }

    void OpenOrder(int orderId)
    {
        // Handle order details opening
        Console.WriteLine($"Opening order details for Order ID: {orderId}");
        // You can navigate to order details page or show a dialog here
    }

    public class Order
    {
        public int OrderID { get; set; }
        public DateTime OrderDate { get; set; }
        public decimal Freight { get; set; }
        public string ShipCountry { get; set; }
        public Employee Employee { get; set; }
        public Customer Customer { get; set; }
    }

    public class Employee
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Photo { get; set; }
    }

    public class Customer
    {
        public string CompanyName { get; set; }
    }
}
